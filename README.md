# Документация по работе с Rest API сервисом “Электронный помощник руководителя медицинского учреждения” Medicatsoft

## 1. Стартовый экран

При переходе на страницу `/assistent/firstpage` пользователя встречает стартовый экран. На данной странице пользователь может нажать на кнопку “Загрузить данные”, и выбрав нужный файл произвести загрузку файла.

## 2. Загрузка файла консультации врача

Для загрузки файла консультации врача производится POST запрос на адрес с файлом в теле запроса. Файл должен быть в формате xlsx. После успешной загрузки файла, все данные о консультации автоматически сохрянются в базу данных, конкретно в таблицу с названием **consultations**.

## 3. Анализ консультации

Для проведения анализа консультации необходимо выполнить GET запрос по адресу `/assistent/firstpage/result` в ответ на этот запрос сервис вернет результат анализа в формате JSON, после чего он будет загружен и выведен на экран пользователя. 

Результат анализа будет содержать информацию о соответствии консультации стандарту оказания медицинской помощи. Если стандарт для данного диагноза существует и, результат анализа будет содержать сообщение "Назначения соответствуют стандарту оказания медицинской помощи”. Если же для диагноза установленного в консультации врача, есть стандарт оказания медицинской помощи, но по результатам консультации, врач поставил некоторые дополнительные назначения, которые не прописаны в стандарте, то результат анализа выдаст следующее сообщение "Сделаны дополнительные назначения, не входящие в стандарт оказания медицинской помощи”.

Если же анализ установил, что для данного диагноза, стандарта оказания медицинской помощи не существует, то пользователь увидит следующее сообщение "Для данного диагноза не разработан стандарт оказания медицинской помощи”.

## 4. Сохранение результата анализа в Базе Данных

В Базе Данных существует две таблицы - **analysis_result** и **last_results.** 

В **analysis_result** записывается текущий результат который отображается пользователю на экране, после загрузки файла консультации и перехода на страницу по адресу `/assistent/firstpage/result`. Так же текущий результат, одновременно с вышеописанным действием, записывается в таблицу **last_results,** для ****того чтобы пользователь в дальнейшем могу отслеживать предыдущие результаты анализа. ****

### Важный момент

Всякий раз когда пользователь добавляет новую консультацию, предыдущий результат удаляется из таблицы **analysis_result.** И на его место в таблице уже под новым ID загружается новый результат анализа. А предудущий результат сохраняется в таблицу предыдущих результатов **last_results.**

# Гипотеза

Врачу необходимо проанализировать правиильность назначений врача-оториноларинголога.

Для этого он загружает xlsx файл со следующими данными:

| Иванов Иван | Муж | 27.06.2004 | J32.9 | Энцефалопатия
 | 24.04.2023 | врач-невролог | Поддержание
нормального уровня артериального давления, иглоукалывание, массаж
воротниковой зоны, электромиостимуляция 
   |
| --- | --- | --- | --- | --- | --- | --- | --- |

**Сервис произведет анализ и вернет по итогу следующий результат:** 

![Снимок экрана 2023-05-29 в 04.20.46.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/64f1adda-2893-4759-8ebc-8577577a6a46/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0_2023-05-29_%D0%B2_04.20.46.png)

**Таким образом пользователь получил результат анализа на соответствие со стандартом оказания медицинской помощи.**
